\section{Matériels et Méthodes}
\subsection{Le cluster de calcul et Slurm}
Le Genoscope possède (dire le nombre de noeuds et leurs spécificité.)
expliquer small, normal, Xlarge et xxlarge.
Il y a 12 noeuds de calculs pour la \emph{production} sur le nouveau cluster \emph{inti}, ces derniers disposent de 16 cœurs et de 257 Go de RAM(mémoire vive). L'accès à l'utilisation des clusters est réalisé par le logiciel Slurm.

\subsection{La base de données de référence NGL et la gestion des projets}
Le Genoscope dispose de sa propre base de données de référence NGL. Celle-ci est divisée en plusieurs parties. NGL\_BI\footnote{NGL Bioinformatic}, est la partie de la base de données utilisée par les équipes de bioinformatique. NGL\_SEQ\footnote{NGL Sequencing}, est la partie de la base de données utilisée dès la réception des échantillons et jusqu'au séquençage de ces derniers. Il y a également les parties NGL\_sub\footnote{NGL submission (base de données des soumissions de projet (example la soumission d'un projet au NCBI))}, NGL\_reagent\footnote{NGL reagent (base de données des réactifs)} et NGL\_projects\footnote{NGL projects (base de données des projets en cours et passé)}. La gestion et le suivi du développement informatique sont réalisés par le système de tickets Jira.

\subsection{Le langage de programmation Perl}
L'écriture du workflow des pipelines pour les séquenceurs MGI est réalisée dans le langage de programmation Perl. L'utilisation de ce langage est rendu necessaire pour des raisons historique du laboratoire, puisque de nombreuses librairies et modules qui ont été utilisé dans l'écriture des pipelines sont écrits en Perl.\\

C'est pour toutes ces raisons qu'il m'a été nécessaire d'apprendre à coder en Perl. j'ai donc commencé par réaliser un programme permettant de faire des analyses statistiques élémentaires sur des fichiers fastq, tel que le taux de GC, la moyenne du score de la qualité, ainsi que plusieurs autres métriques. Le programme est capable de gérer les fichiers fastq issue de séquençage \emph{single end\footnote{Lecture dans un seul sens des reads par le séquenceur}} et \emph{paired end\footnote{Lecture dans les deux sens des reads par le séquenceur}}. Cela m'a permis de prendre en main les librairies Perl utilisées pour les différents pipelines déja en place. Ainsi que de m'habituer à l'environement de travail, l'utilisation du lancement de job sur les noeuds de calculs et l'utilisation des modules\footnote{Un module contient un ou plusieurs logiciels tiers ou dévellopé par les équipes du genoscope. Il est néccessaire de les charger dans notre environement de travail pour pouvoir utiliser ces logiciels.} pour les différents pipelines.

\subsection{Logiciels de \emph{Base Calling} (bcl2fastq - bcl-convert)}
Ces deux logicels de \emph{Base Calling} (bcl2fastq et bcl-convert), sont tout deux développé et commercialisés par Illumina. Cette évaluation entre ces deux logiciels est nécessaire pour déterminer les changements qu'il y aura à faire dans les pipelines de génération de fichiers de séquences pour les technologies Illumina. En vue du remplacement de bcl2fastq (qui sera bientôt obsolète) par bcl-convert.

Dans un premier temps, il est nécessaire de déterminer les conditions optimales de bcl2fastq (temps total (\emph{Elapsed time}\footnote{Temps écoulé entre le début du programme et le fin de celui-ci}), temps CPU (\emph{CPU time}\footnote{Temps d'utilisation des cpu par le programme}), pourcentage d'utilisation CPU (\emph{\%CPU}\footnote{((\emph{CPU time} + temps utilisé par les appels système ) / \emph{Elapsed time} ) / nombres de CPU utilisé par le programme}) en fonction des ressources disponibles sur les noeuds du cluster (\emph{inti}) réservé à la \emph{prodution}, avec l'objectif de pouvoir appliquer les mêmes conditions à bcl-convert. Les conditions optimales sont déterminées en fonction des paramètres suivants de bcl2fatq (l'équivalent de bcl-convert est indiqué entre crochets): \\
\begin{itemize}
    \item[•] \texttt{r} [bcl-num-decompression-threads] : nombre de \emph{threads\footnote{Processus : instructions du langage machine d'un processeur.}} accordé pour la décompréssion et la lecture des \emph{Bases Calls\footnote{Fichier d'attribution des bases nucléiques en fonction des pics du chromatogramme lors du séquençage}}
    \item[•] \texttt{p} [bcl-num-conversion-threads] : conversion des \emph{Bases Calls} en fastq
    \item[•] \texttt{w} [bcl-num-compression-threads] : écriture et compréssion des fichiers fastq\\
\end{itemize}

Tous ces tests sont réalisés sur le même noeud de calcul, dans l'objectif de minimiser les biais. La comparaison est effectuée sur le temps total de génération des fastq et le démultiplexage, ainsi que le temps CPU et le pourcentage d'utilisation des CPU.

\subsection{Les pipelines de génération de fichiers de séquences pour les technologies Illumina et Nanopore}
Les pipelines de générations de fichiers de séquences pour les technologies Illumina et Nanopore réalisent dans un premier temps le \emph{Base Calling} permettant la création des fichiers de séquences corespondant aux échantillons et des fichiers de statistiques de ces derniers. Ils créer les runs, les pistes, et les readset dans NGL\_BI en y insérant les metriques, graphiques et fichier permettant leurs évaluations.\\

Concernant le pipeline de génération de fichiers de séquences pur la technologie MGI, il s'agira de dévelloper un pipeline simillaire à celui d'Illumina en prenant en compte que le \emph{Base Calling} est directement réalisé par les séquençeurs. Les métriques, graphiques et fichiers de statistiques sont également différents d'Illumina. Il sera donc necessaire de trouver comment obtenir les métriques, graphiques et fichiers, ou de les calculer, générer à partir des données générer lors du \emph{Base Calling} par le séquençeur permmetant de les insérer dans NGL\_BI

\subsection{Les pipelines de contrôle qualité des fichiers de séquences pour les technologies Illumina et Nanopore}
Les pipelines de contrôle qualité des fichiers de séquences réalisent différentes étapes de contrôle qualité et de nettoyage des fichiers de séquences. Il réalise le contrôle qualité et l'estimation de duplicat des fichiers avant et après netoyage (\emph{trimming}), il retire le \emph{PhiX}\footnote{Parties du génome du phage \emph{Lambda} qui sont ajoutés sur les pistes des flowcell avant le séquençage, permettant de contrôler le bon déroulé du séquençage.} (pour les technologies Illumina), réalise l'assignation taxonomique des séquences, réalise un allignement des séquences si un génome de référence existe, réalise le calcul du pourcenatage de séquences qui ont leurs reads \emph{forward} (brin sens) et \emph{reverse} (brin anti-sens) qui se chevauche et réalise la distribution des fichier de séquences netoyés dans leurs répertoires de projet, d'échantillon, de type de technologie et de run.\\

Concernant le pipeline de contrôle qualité des fichiers de séquences pour la technologie MGI, qui est en cours de développement. Il s'agit de développer un pipeline similaire à celui d'Illumina en prenant en compte qu'avec cette technologie il n'y a pas de \emph{PhiX} à enlever dans les fichiers de séquences.